(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],m=0,d=[];m<s.length;m++)o=s[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"011f":function(t,e,a){"use strict";var n=a("038a"),i=a.n(n);i.a},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"038a":function(t,e,a){},"1cf6":function(t,e,a){"use strict";var n=a("7337"),i=a.n(n);i.a},"44b0":function(t,e,a){"use strict";var n=a("cfae"),i=a.n(n);i.a},7337:function(t,e,a){},"85ec":function(t,e,a){},b64e:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=a("2b27"),r=a.n(i),o=a("ee98"),s=a.n(o),c=(a("bf40"),a("ce5b")),l=a.n(c);n["default"].use(l.a);var u=new l.a({icons:{iconfont:"mdiSvg"}}),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("sidebar",{model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}}),a("v-app-bar",{class:{"elevation-0":"Subscribe"===t.$route.name},attrs:{app:"",color:"indigo",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("v-toolbar-title",[t._v("BGmi - "+t._s(t.$route.name))])],1),a("v-content",[a("notifications"),a("router-view")],1)],1)},d=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{app:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("v-list",[a("v-list-item",{attrs:{to:"/"}},[a("v-list-item-action",[a("v-avatar",[a("img",{attrs:{alt:"logo",src:t.publicPath+"static/logo144.jpg"}})])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("BGmi")])],1)],1),a("v-divider"),a("item",{attrs:{icon:t.icons.mdiLibraryVideo,title:"Bangumi",to:"/"}}),a("item",{attrs:{href:"/bangumi/",icon:t.icons.mdiFolder,title:"Bangumi Files"}}),a("item",{attrs:{icon:t.icons.mdiCalendar,title:"calendar",to:"/calendar"}}),a("item",{attrs:{icon:t.icons.mdiRss,title:"Resource",to:"/resource"}}),a("v-divider"),a("item",{attrs:{icon:t.icons.mdiYoutubeSubscription,title:"Subscribe",to:"/subscribe"}}),a("v-divider"),a("item",{attrs:{icon:t.icons.mdiInformation,title:"About",to:"/about"}}),a("item",{attrs:{icon:t.icons.mdiDotsVertical,href:"https://github.com/BGmi/BGmi",title:"Based On BGmi"}})],1)],1)},f=[],h=a("94ed"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-item",{attrs:{to:t.to,href:t.href,exact:"exact"}},[a("v-list-item-action",[a("v-icon",[t._v(t._s(t.icon))])],1),a("v-list-item-content",[a("v-list-item",[t._v(t._s(t.title))])],1)],1)},b=[],g={props:{icon:{default:"",type:String},title:{default:"",type:String},href:{default:"",type:String},to:{default:"",type:String}}},y=g,_=a("2877"),k=Object(_["a"])(y,v,b,!1,null,null,null),x=k.exports,$={name:"sidebar",data:function(){return{icons:{mdiCalendar:h["a"],mdiRss:h["g"],mdiYoutubeSubscription:h["h"],mdiInformation:h["e"],mdiDotsVertical:h["b"],mdiLibraryVideo:h["f"],mdiFolder:h["c"]},visible:this.value,publicPath:""}},props:{value:{type:Boolean,default:!1}},methods:{},components:{Item:x},watch:{visible:function(t){this.$emit("input",t)},value:function(t){this.visible=t}}},w=$,B=Object(_["a"])(w,p,f,!1,null,null,null),O=B.exports,C={name:"App",components:{Sidebar:O},data:function(){return{drawer:null,token:"",sidebarToggled:!1}},computed:{navOpened:function(){return this.sidebarToggled}},methods:{toggleSideBar:function(){this.sidebarToggled=!this.sidebarToggled},onCloseLayerClick:function(){this.toggleSideBar()}},watch:{}},S=C,j=(a("034f"),Object(_["a"])(S,m,d,!1,null,null,null)),P=j.exports,F=(a("45fc"),a("b0c0"),a("8c4f")),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",lg10:"",xl8:""}},[a("v-card",[a("v-toolbar",{attrs:{app:"",dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s(t.bangumi.bangumi_name))]),a("v-spacer"),a("v-tooltip",{attrs:{right:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",large:"",href:t.dirPath,target:"_blank"},slot:"activator"},[a("v-icon",{attrs:{large:""}},[t._v(t._s(t.mdiFolderOpen))])],1),a("span",[t._v("Bangumi Files")])],1)],1),a("v-card-text",[a("div",{staticClass:"dplayer-container"},[a("div",{attrs:{id:t.bangumi.bangumi_name}})])]),a("v-card-actions",t._l(t.episodes,(function(e,n){return a("router-link",{key:n,class:{lightGray:t.hasWatched(t.bangumi.bangumi_name,e),"btn--flat":parseInt(t.$route.params.episode.toString())!==parseInt(e.toString())},attrs:{tag:"v-btn",to:"/player/"+t.$route.params.category+"/"+t.normalizePath(t.bangumi.bangumi_name)+"/"+e}},[t._v(" "+t._s(e)+" ")])})),1)],1)],1)],1)],1)},I=[],T=(a("caad"),a("b64b"),a("2532"),a("b85c")),M=a("f7a5"),E=a.n(M),D=a("6821"),R=a.n(D),V=(a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("2f62")),A=a("bc3a"),L=a.n(A),q=L.a.create({baseURL:"./api/"});n["default"].use(V["a"]);var H={bangumi:[],hasBangumiIndexFetched:!1,bangumiOld:[],hasBangumiOldFetched:!1,isLogin:!1,token:!1,danmaku_api:"",coverRoot:"/bangumi/cover",bgmiVersion:"",cal:{},calFetched:!1,history:JSON.parse(localStorage.getItem("history")||"{}")},K=new V["a"].Store({state:H,mutations:{login:function(t,e){t.isLogin=!0,t.token=e},storeBangumi:function(t,e){var a=e.category,n=e.bangumi;"index"===a?(t.bangumi=n,t.hasBangumiIndexFetched=!0):"old"===a&&(t.bangumiOld=n,t.hasBangumiOldFetched=!0)},init:function(t,e){t.coverRoot=e.cover_url,t.danmaku_api=e.danmaku_api,t.bgmiVersion=e.version},bangumiIndex:function(t,e){t.bangumi=e,t.hasBangumiIndexFetched=!0},clearBangumiIndex:function(t,e){t.bangumi=[],t.hasBangumiIndexFetched=!1},calendar:function(t,e){t.cal=e,t.calFetched=!0},saveHistory:function(t,e){var a={name:e.bangumi_name,episode:e.episode.toString()},n=t.history;Object.prototype.hasOwnProperty.call(n,a.name)||(n[a.name]={}),n[a.name][a.episode]=!0,t.history=n,localStorage.setItem("history",JSON.stringify(n))}},actions:{getCalendar:function(t,e){var a=t.commit,n=t.state;n.calFetched?e(n.cal):q.get("cal").then((function(t){a("calendar",t.data.data),e(t.data.data)}))},getBangumi:function(t,e){var a=t.commit,n=t.state,i=e.category,r=e.cb;if("index"===i){if(n.hasBangumiIndexFetched)return void r(n.bangumi)}else{if("old"!==i)throw new Error("wrong bangumi category");if(n.hasBangumiOldFetched)return void r(n.bangumiOld)}q.get(i).then((function(t){a("storeBangumi",{category:i,bangumi:t.data.data}),r(t.data.data)}))}}}),W=K;function z(t,e){if(Object.prototype.hasOwnProperty.call(W.state.history,t)&&Object.prototype.hasOwnProperty.call(W.state.history[t],e))return W.state.history[t][e]}function J(t){return t=t.replace(/[:*?"<>|']/g,""),t}var N=a("df7c"),U=a.n(N),Y={data:function(){return{mdiFolderOpen:h["d"],bangumi:{},videoFileUrl:"",$dplayer:null,danmakuApi:""}},watch:{"$route.params.episode":function(){this.init()}},methods:{normalizePath:J,hasWatched:z,init:function(){var t=this,e=function(e){t.initData(e)};this.$store.dispatch("getBangumi",{category:this.$route.params.category,cb:e})},initData:function(t){var e,a=this,n=Object(T["a"])(t);try{var i=function(){var t=e.value;if(J(t.bangumi_name)===a.$route.params.bangumi_name)return a.bangumi=t,a.$store.commit("saveHistory",{bangumi_name:t.bangumi_name,episode:a.$route.params.episode}),a.$nextTick((function(){var e="/bangumi".concat(t.player[a.$route.params.episode].path),n=t.player[a.$route.params.episode].path.toLowerCase();(n.includes("hevc")||n.includes("x265"))&&a.$notify({type:"warn",text:"如果不能正常播放视频,可能是因为这个视频的编码方式暂时不受浏览器支持,请使用其他播放器播放."}),a.videoFileUrl=e;var i={theme:"#FF3333",element:document.getElementById(t.bangumi_name),screenshot:!0,video:{url:e,pic:t.cover}};a.$store.state.danmaku_api&&(i.danmaku={id:R()(t.bangumi_name)+a.$route.params.episode,api:a.$store.state.danmaku_api}),a.$dplayer?a.$dplayer.switchVideo(i.video,i.danmaku):a.$dplayer=new E.a(Object.assign({},i))})),"break"};for(n.s();!(e=n.n()).done;){var r=i();if("break"===r)break}}catch(o){n.e(o)}finally{n.f()}}},created:function(){this.init()},computed:{dirPath:function(){return U.a.dirname(this.videoFileUrl)+"/"},episodes:function(){return Object.prototype.hasOwnProperty.call(this.bangumi,"player")?Object.keys(this.bangumi.player).reverse():[]}}},Z=Y,Q=(a("44b0"),Object(_["a"])(Z,G,I,!1,null,"4323d408",null)),X=Q.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":"","grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.bangumi,(function(e,n){return a("v-flex",{key:n,attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[a("v-card",{staticStyle:{overflow:"hidden"},attrs:{"md-theme":"white"}},[a("v-img",{attrs:{src:"."+e.cover,height:"200px"}}),a("v-card-title",[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(e.bangumi_name+(2===e.status?"(new)":""))+" ")]),a("span",{staticClass:"grey--text"},[t._v("latest:"+t._s(e.episode))])])]),a("v-card-actions",{staticClass:"button-container"},[t.isEmpty(e.player)?t._e():a("div",t._l(Object.keys(e.player).reverse().slice(0,3),(function(n){return a("v-btn",{key:n,class:{gray:t.hasWatched(e.bangumi_name,n)},attrs:{flat:""},on:{click:function(a){t.$router.push("/player/"+t.category+"/"+t.normalizePath(e.bangumi_name)+"/"+n)}}},[t._v(" "+t._s(n)+" ")])})),1)]),a("br")],1)],1)})),1)],1)},et=[],at=a("13ea"),nt=a.n(at),it={name:"Bangumi",components:{},data:function(){return{bangumi:[]}},props:{category:{default:"index",type:String,required:!0}},methods:{hasWatched:z,isEmpty:nt.a,normalizePath:J,initData:function(){var t=this;this.$store.dispatch("getBangumi",{category:this.category,cb:function(e){t.bangumi=e}})}},watch:{category:function(){this.initData()}},mounted:function(){this.initData()}},rt=it,ot=(a("ec46"),Object(_["a"])(rt,tt,et,!1,null,"4f97d9c3",null)),st=ot.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",[a("v-card",{staticStyle:{overflow:"hidden"},attrs:{"md-theme":"white"}},[a("v-card-title",[t.tabData?t._l(t.weekday,(function(e,n){return a("div",{key:n},[a("p",{attrs:{id:"cal"},domProps:{innerHTML:t._s(t.bangumiToHtml(e,t.tabData[e]))}})])})):a("div",{staticClass:"col-md-2 col-md-offset-5"})],2),a("br")],1)],1)],1)],1)},lt=[],ut=(a("a15b"),n["default"].extend({name:"calendar",components:{},data:function(){return{tabData:!1,weekday:["sun","mon","tue","wed","thu","fri","sat"]}},created:function(){var t=this;this.$store.dispatch("getCalendar",(function(e){t.tabData=e}))},methods:{bangumiToHtml:function(t,e){var a=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.push(e[n].status?"<b>"+e[n].name+"</b>":""+e[n].name);return'<h3 class="week">'+t+"</h3>"+a.join(" / ")}}})),mt=ut,dt=(a("1cf6"),Object(_["a"])(mt,ct,lt,!1,null,null,null)),pt=dt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("a",{attrs:{href:"/resource/feed.xml",target:"_blank"}},[t._v(" Rss Feed ")])]),a("v-flex",{attrs:{xs12:""}},[a("a",{attrs:{href:"/resource/calendar.ics",target:"_blank"}},[t._v(" ICS Calendar for mobile phone ")])])],1)],1)},ht=[],vt={name:"Resource",components:{},created:function(){},data:function(){return{}},methods:{}},bt=vt,gt=Object(_["a"])(bt,ft,ht,!1,null,"e8648ac6",null),yt=gt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tabs",{attrs:{backgroundColor:"indigo",dark:"","fixed-tabs":""}},[t._l(t.weekKey,(function(e){return a("v-tab",{key:"tab-header-"+e,attrs:{id:e,ripple:""}},[t._v(" "+t._s(e)+" ")])})),t._l(t.weekKey,(function(e){return a("v-tab-item",{key:"tab-item-"+e},[a("v-container",{attrs:{"fill-height":"","grid-list-lg":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.bangumiCalendar[e.toLowerCase()],(function(t,e){return a("v-flex",{key:e,attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[a("bangumi-card",{attrs:{bangumi:t},on:{"update:bangumi":function(e){t=e}}})],1)})),1)],1)],1)}))],2)},kt=[],xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-img",{attrs:{src:t.imgSrc,height:"100px"}}),a("v-card-text",[a("p",{staticClass:"category text-black headline"},[t._v(t._s(t.bangumi.name))])]),a("v-card-actions",[a("v-spacer"),t.bangumi.status?t.expand?a("v-btn",{staticClass:"md-raised",on:{click:t.pack}},[t._v(" pack ")]):a("v-btn",{staticClass:"md-raised",attrs:{color:"success"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.expandDetail()}}},[a("div",[t._v("detail")])]):a("v-btn",{staticClass:"md-raised ",class:{"md-primary":!t.bangumi.status,"md-accent":t.bangumi.status},attrs:{color:"info"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.add()}}},[t._v(" add ")])],1),a("v-dialog",{model:{value:t.expand,callback:function(e){t.expand=e},expression:"expand"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[t._v("Filter")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Status",type:"number"},model:{value:t.bangumi.status,callback:function(e){t.$set(t.bangumi,"status",e)},expression:"bangumi.status"}}),a("v-text-field",{attrs:{label:"Include"},model:{value:t.filter.include,callback:function(e){t.$set(t.filter,"include",e)},expression:"filter.include"}}),a("v-text-field",{attrs:{label:"Regex"},model:{value:t.filter.regex,callback:function(e){t.$set(t.filter,"regex",e)},expression:"filter.regex"}}),a("v-text-field",{attrs:{label:"Exclude"},model:{value:t.filter.exclude,callback:function(e){t.$set(t.filter,"exclude",e)},expression:"filter.exclude"}}),a("v-text-field",{attrs:{label:"Episode",type:"number"},model:{value:t.mark,callback:function(e){t.mark=e},expression:"mark"}})],1)],1),a("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.showSubtitle,expression:"showSubtitle"}]},t._l(t.filter.subtitle_group,(function(e){return a("v-checkbox",{key:e,attrs:{label:e,value:e},model:{value:t.followed,callback:function(e){t.followed=e},expression:"followed"}})})),1),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:function(e){t.showSubtitle=!t.showSubtitle}}},[t._v(" 显示字幕组 ")]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.del()}}},[t._v(" delete ")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.save()}}},[t._v(" save ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog5,callback:function(e){t.dialog5=e},expression:"dialog5"}},[a("v-card",[a("v-card-title",[t._v(" 确认删除? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){return e.stopPropagation(),t.onClose("not-ok")}}},[t._v("Cancel ")]),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){return e.stopPropagation(),t.onClose("ok")}}},[t._v("Delete ")])],1)],1)],1)],1)},$t=[],wt=(a("99af"),a("4de4"),a("3ca3"),a("ddb0"),"./bangumi/cover/"),Bt={data:function(){return{dialog5:!1,showSubtitle:!1,imgRoot:wt,expand:!1,filter:{name:this.bangumi.name,regex:"",followed:[],subtitle_group:[],exclude:"",bangumi_name:"",include:""},script:!1,src:"",followed:[],mark:this.bangumi.episode}},computed:{imgSrc:function(){return"".concat(this.imgRoot).concat(this.bangumi.cover)},filter_args:function(){var t={name:this.bangumi.name};return t.include=this.filter.include,t.exclude=this.filter.exclude,t.regex=this.filter.regex,t.subtitle=this.followed.join(","),t}},props:{bangumi:{type:Object,required:!0}},methods:{status:function(){this.$http.post("status",{name:this.bangumi.name,status:this.bangumi.status})},save:function(){var t=this,e=[];e=this.script?[this.$http.post("mark",{name:this.bangumi.name,episode:this.mark})]:[this.$http.post("filter",this.filter_args),this.$http.post("mark",{name:this.bangumi.name,episode:this.mark})],this.expand=!1,Promise.all(e).then((function(e){t.expand=!1,t.$notify({type:"success",text:"save filter successfully",placement:{from:"top",align:"right"}})}),(function(t){}))},pack:function(){this.expand=!1},fetchFilter:function(t){this.filter=t,this.followed=t.followed,this.expand=!0},expandDetail:function(){var t=this;this.bangumi.id?this.$http.post("filter",{name:this.bangumi.name}).then((function(e){t.fetchFilter(e.data.data)})):(this.expand=!0,this.script=!0)},add:function(){var t=this;this.$store.commit("clearBangumiIndex");var e="add";this.$http.post("".concat(e),{name:this.bangumi.name}).then((function(e){t.bangumi.status=1,t.$notify({type:e.data.status,text:e.data.message,placement:{from:"top",align:"right"}})}),(function(e){t.$notify({type:"danger",text:e.data.message,placement:{from:"top",align:"right"}})}))},onClose:function(t){var e=this;if(this.dialog5=!1,"ok"===t){this.$store.commit("clearBangumiIndex"),this.expand=!1;var a="delete";this.$http.post("".concat(a),{name:this.bangumi.name}).then((function(t){e.bangumi.status=0,e.$notify({type:t.data.status,text:t.data.message,placement:{from:"top",align:"right"}})}),(function(t){e.$notify({type:"danger",text:t.data.message,placement:{from:"top",align:"right"}})}))}},del:function(){this.dialog5=!0}}},Ot=Bt,Ct=(a("011f"),Object(_["a"])(Ot,xt,$t,!1,null,"1e31a7f6",null)),St=Ct.exports,jt={name:"subscribe",components:{BangumiCard:St},data:function(){return{bangumiCalendar:!1,weekKey:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],latestBgmiVersion:"",bgmiVersion:""}},mounted:function(){var t=this;this.$store.dispatch("getCalendar",(function(e){t.bangumiCalendar=e,t.latestBgmiVersion=t.$store.state.latestBgmiVersion,t.bgmiVersion=t.$store.state.bgmiVersion,t.$nextTick((function(){t.bgmiVersion<t.latestBgmiVersion&&t.$notify({type:"danger",text:"Please upgrade your BGmi to ".concat(t.latestBgmiVersion),placement:{from:"top",align:"center"}})}))}))}},Pt=jt,Ft=Object(_["a"])(Pt,_t,kt,!1,null,"346ba672",null),Gt=Ft.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{xs:"10"}},[a("div",{staticClass:"display-1"},[t._v("BGmi:")]),a("p",{staticClass:"subheading"},[t._v("version: "+t._s(t.$store.state.bgmiVersion))]),a("p",[t._v(" BGmi HTTP Service 基于 "),a("a",{attrs:{href:"https://github.com/BGmi/BGmi",target:"_blank"}},[t._v("BGmi")]),t._v(" 构建。"),a("br")]),t._v(" 其中，BGmi 的数据来源于 "),a("a",{attrs:{href:"https://bangumi.moe",target:"_blank"}},[t._v("萌番组 "),a("sup",[t._v("大好きだよ")])]),t._v("/ "),a("a",{attrs:{href:"https://mikanani.me/",target:"_blank"}},[t._v("蜜柑计划 - Mikan Project")]),t._v("/ "),a("a",{attrs:{href:"http://share.dmhy.org/",target:"_blank"}},[t._v("動漫花園資源網")]),a("br"),a("br"),a("div",{staticClass:"display-1"},[t._v("BGmi-frontend:")]),a("p",{staticClass:"subheading"},[t._v("version: "+t._s(t.version))]),a("h3",[t._v("致谢")]),a("ul",[a("li",[a("a",{attrs:{href:"https://bangumi.moe",target:"_blank"}},[t._v("萌番组")]),a("br")]),a("li",[a("a",{attrs:{href:"https://mikanani.me/",target:"_blank"}},[t._v("蜜柑计划")])]),a("li",[a("a",{attrs:{href:"https://aria2.github.io",target:"_blank"}},[t._v("aria2")])]),a("li",[a("a",{attrs:{href:"https://github.com/DIYgod/DPlayer",target:"_blank"}},[t._v("DPlayer")])])]),a("br"),a("h3",[t._v("BGmi Creator: "),a("a",{attrs:{href:"https://github.com/RicterZ",target:"_blank"}},[t._v("github/RicterZ ")])]),a("h3",[t._v("Contributors: "),a("a",{attrs:{href:"https://github.com/BGmi/BGmi/graphs/contributors"}},[t._v("github/BGmi/BGmi/contributors")])]),a("br"),a("h3",[t._v("Bug Report")]),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/BGmi/BGmi/issues"}},[t._v("BGmi Bug Report")])]),a("li",[a("a",{attrs:{href:"https://github.com/BGmi/BGmi-frontend/issues"}},[t._v("BGmi-frontend Bug Report")])])])])],1)],1)},Tt=[],Mt=n["default"].extend({name:"about",data:function(){return{version:"1.1.13"}}}),Et=Mt,Dt=Object(_["a"])(Et,It,Tt,!1,null,null,null),Rt=Dt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact-us full-screen"},[t._v(" nothing here "),a("router-link",{attrs:{to:"/"}},[t._v("Home")])],1)},At=[],Lt={},qt=Lt,Ht=Object(_["a"])(qt,Vt,At,!1,null,null,null),Kt=Ht.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{md6:"",sm10:"",xs12:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{app:"",color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Auth")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("label"),a("v-text-field",{attrs:{label:"token",type:"text"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClose()}},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}})],1)],1),a("v-card-actions",[a("v-select",{attrs:{items:t.rememberMeTimeItems,"item-text":"time","item-value":"value",label:"Remember Me"},model:{value:t.rememberMe,callback:function(e){t.rememberMe=e},expression:"rememberMe"}}),a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onClose()}}},[t._v("Login ")])],1)],1)],1)],1)],1)},zt=[],Jt=n["default"].extend({name:"AskForToken",data:function(){var t="1y";this.$cookies.isKey("rememberMe")&&(t="false"!==this.$cookies.get("rememberMe")&&this.$cookies.get("rememberMe"));var e="/";return this.$route.query.redirect&&(e=Array.isArray(this.$route.query.redirect)?this.$route.query.redirect[0]||"":this.$route.query.redirect),{redirectTo:e,rememberMe:t,rememberMeTimeItems:[{time:"No",value:!1},{time:"1 year",value:"1y"},{time:"1 month",value:"1m"},{time:"1 week",value:"7d"},{time:"1 day",value:"1d"}],token:""}},created:function(){this.$cookies.isKey("auth")&&(this.token=this.$cookies.get("auth"),this.tryAuth())},methods:{tryAuth:function(){var t=this;this.$http.post("auth",{token:this.token}).then((function(){t.$store.commit("login",t.token),t.$http.defaults.headers["bgmi-token"]=""+t.token,t.rememberMe&&t.$cookies.set("auth",t.token,t.rememberMe),t.$cookies.set("rememberMe",t.rememberMe),t.$nextTick((function(){t.$router.push(t.redirectTo)}))}),(function(){t.$notify({type:"error",text:"auth wrong"})}))},onClose:function(){this.tryAuth()}}}),Nt=Jt,Ut=Object(_["a"])(Nt,Wt,zt,!1,null,null,null),Yt=Ut.exports;n["default"].use(F["a"]);var Zt=new F["a"]({mode:"hash",routes:[{path:"/",name:"Bangumi",component:st,props:{category:"index"}},{path:"/:category(old)",name:"Old",component:st,props:{category:"old"}},{path:"/player/:category(index|old)/:bangumi_name(.*)/:episode",name:"Player",component:X},{path:"/calendar",name:"Calendar",component:pt},{path:"/ask-for-token",name:"Auth",component:Yt},{path:"/resource",name:"Resource",component:yt},{path:"/subscribe",name:"Subscribe",component:Gt,meta:{requiresAuth:!0}},{path:"/about",name:"About",component:Rt},{path:"*",component:Kt}],linkActiveClass:"active"});Zt.beforeEach((function(t,e,a){"Player"!==t.name?document.title="BGmi - "+t.name:document.title="BGmi - "+t.params.bangumi_name+" - "+t.params.episode,t.matched.some((function(t){return t.meta.requiresAuth}))?W.state.isLogin?a():a({path:"/ask-for-token",query:{redirect:t.fullPath}}):a()}));var Qt=Zt;n["default"].config.productionTip=!1,n["default"].use(r.a),n["default"].use(s.a),n["default"].prototype.$http=q,q.interceptors.response.use((function(t){return W.commit("init",t.data),t})),new n["default"]({router:Qt,store:W,vuetify:u,render:function(t){return t(P)}}).$mount("#app")},cfae:function(t,e,a){},ec46:function(t,e,a){"use strict";var n=a("b64e"),i=a.n(n);i.a}});
//# sourceMappingURL=app.96f5fd38.js.map